<!DOCTYPE html>
<html>
<head>
    <title>Five Ponds Press</title>
    <link rel="stylesheet" href="/reader.css">
    <link rel="stylesheet" href="css/book.css">
    <link rel="stylesheet" href="/fonts.css">
    <link rel="stylesheet" href="/chalkboard.css">
                <link rel="stylesheet" href="css/civics_cover.css">
        <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/reader.js"></script>
    <style>
        #zoom-handle {
            width: 3em;
            height: 1.6em;
            margin-top: -.8em;
            text-align: center;
            line-height: 1.6em;
            left: -1.2em;
        }
    </style>
    <script>
        var forceLeft = false;
        var forceRight = true;
        var readbutton = false;
        $(document).on("pagebeforeshow", function(){
            updateByQueryValues();
            $("div.sheet").on("vmousemove",function(event){
                var magnification = $( "#zoom-slider" ).slider("value");
                if (magnification == 100) {
                    return;
                }
            });
            $("div.sheet").on("swipeleft",function(event){
                var magnification = $( "#zoom-slider" ).slider("value");
                if (magnification != 100) {
                    return;
                }
                var dst = $("#SNEXT1:visible").attr("href");
                if (dst == null) {
                    dst = $("#SNEXT2:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#SNEXT1R:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#SNEXT2R:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#DNEXT1:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#DNEXT2:visible").attr("href");
                }
                if (dst != null) {
                    goto (dst);
                }
            });
            $("div.sheet").on("swiperight",function(event){
                var magnification = $( "#zoom-slider" ).slider("value");
                if (magnification != 100) {
                    return;
                }
                var dst = $("#SPREV1:visible").attr("href");
                if (dst == null) {
                    dst = $("#SPREV2:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#SPREV1R:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#SPREV2R:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#DPREV1:visible").attr("href");
                }
                if (dst == null) {
                    dst = $("#DPREV2:visible").attr("href");
                }
                if (dst != null) {
                    goto (dst);
                }
            });
            $("#player").on("ended",function(event){
                unplay();
            });
        });
        $( function() {
            var handle = $( "#zoom-handle" );
            $( "#zoom-slider" ).slider({
                orientation: "vertical",
                range: "min",
                min: 100,
                max: 400,
                value: 100,
                create: function() {
                    handle.text( $( this ).slider( "value" )+"%" );
                },
                slide: function( event, ui ) {
                    handle.text( ui.value+"%" );
                    zoom( ui.value );
                }
            });
            $( ".hscroll-handle" ).draggable({
                containment: "parent",
                start: function() {
                    $( ".hscroll-handle" ).addClass("hscroll-dragging");
                },
                drag: function() {
                    scrollx();
                },
                stop: function() {
                    $( ".hscroll-handle" ).removeClass("hscroll-dragging");
                }
            });
            $( ".vscroll-handle" ).draggable({
                containment: "parent",
                start: function() {
                    $( ".vscroll-handle" ).addClass("vscroll-dragging");
                },
                drag: function() {
                    scrolly();
                },
                stop: function() {
                    $( ".vscroll-handle" ).removeClass("vscroll-dragging");
                }
            });
        } );
        function play(src, anchor) {
            unplay();
            readbutton = anchor;
            readbutton.addClass("pressed");
            readbutton.removeClass("not_pressed");
            $("#player").attr("src", src);
            var element = $("#player");
            element.get(0).load();
            element.get(0).play();
        }
        function unplay() {
            if (readbutton != false) {
                readbutton.removeClass("pressed");
                readbutton.addClass("not_pressed");
                readbutton = false;
            }
        }
        function oldgoto(dst) {
            var element = $("#player");
            element.get(0).pause();
            window.location.rel = "external";
            window.location.href = dst;
        }
        function zoom(magnification) {
            $("#scalebox").css({"height":(magnification*1.00)+"%","width":(magnification*1.00)+"%","font-size":(magnification/100)+"em"});
            constrainx(magnification);
            constrainy(magnification);
            scrollx();
            scrolly();
        }
        function scrollx() {
            var left = $( ".hscroll-handle" ).position().left - $( ".hscroll-inner" ).position().left;
            var width = $( ".hscroll-inner" ).width();
            var magnification = $( "#zoom-slider" ).slider("value");
            $("#scalebox").css({"left":(left/width*-100*magnification/100)+"%"});
        }
        function scrolly() {
            var top = $( ".vscroll-handle" ).position().top - $( ".vscroll-inner" ).position().top;
            var height = $( ".vscroll-inner" ).height();
            var magnification = $( "#zoom-slider" ).slider("value");
            $("#scalebox").css({"top":(top/height*-100*magnification/100)+"%"});
        }
        function constrainx(magnification) {
            var left = $( ".hscroll-handle" ).position().left - $( ".hscroll-inner" ).position().left;
            var width = $( ".hscroll-inner" ).width();
            var maxleft = 1 - 100 / magnification;
            if ( (left / width) > maxleft) {
                $(".hscroll-handle").css({"left":(100*maxleft)+"%"});
            }
            $(".hscroll-handle").css({"width":(10000/magnification)+"%"});
        }
        function constrainy(magnification) {
            var top = $( ".vscroll-handle" ).position().top - $( ".vscroll-inner" ).position().top;
            var height = $( ".vscroll-inner" ).height();
            var maxtop = 1 - 100 / magnification;
            if ( (top / height) > maxtop) {
                $(".vscroll-handle").css({"top":(100*maxtop)+"%"});
            }
            $(".vscroll-handle").css({"height":(10000/magnification)+"%"});
        }
    </script>
</head>
<body>
<div id="reader">
    <div id="readerTop">
        <div id="readerTopLeft">
        </div><!-- no whitespace
         --><div id="readerTopCenter">
            <div class="toolbar">
                <div style="position: absolute; height:100%; width: auto; top:0%; left:5%;" class="single">
                                    </div>
                <div style="position: absolute; height:100%; width: auto; top:0%; left:5%;" class="dual">
                                    </div>
                <div style="position: absolute; height:100%; width: auto; top:0%; left:32.67%;">
                                        <a href="2.html"; onclick="goto('2.html'); return false;"><img class="button" src="/images/contents.png"/></a>
                                    </div>
                                <div style="position: absolute; height:100%; width: auto; top:0%; left:60.33%;" class="single">
                                    </div>
                <div style="position: absolute; height:100%; width: auto; top:0%; left:60.33%;" class="dual">
                                    </div>
                <div style="position: absolute; height:100%; width: auto; top:0%; left:88%;" class="single">
                                            <a id="SNEXT1" rel="external" class="leftButton" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                            <a id="SNEXT1R" rel="external" class="rightButton" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                    </div>
                <div style="position: absolute; height:100%; width: auto; top:0%; left:88%;" class="dual">
                                            <a id="DNEXT1" rel="external" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                    </div>
            </div>
        </div><!-- no whitespace
         --><div id="readerTopRight">
        </div>
    </div>
    <div id="readerMiddle">
        <div id="readerMiddleLeft">
            <div class="toolbar">
                <div class="buttons-on-sides" style="position: absolute; height: 8%; top:0.5%; left:10%;">
                                        <a href="2.html"; onclick="goto('2.html'); return false;"><img class="button" src="/images/contents.png"/></a>
                                    </div>
                <div style="position: absolute; height: 8%; top:45%; left:10%;" class="single buttons-on-sides">
                                    </div>
                <div style="position: absolute; height: 8%; top:45%; left:10%;" class="dual buttons-on-sides">
                                    </div>
                <div id="zoom-outer" style="position: absolute; height: 80%; top:10%;">
                    <div id="zoom-slider" style="height: 80%; left: 7.5%;">
                        <span tabindex="0" id="zoom-handle" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                    </div>
                </div>
            </div>
        </div><!-- no whitespace
         --><div id="viewArea" class="sheet">
                <div id="scalebox">
                    <div class="leftPage page_">
                                                                                                                    </div><!-- No whitespace
             --><div class="rightPage page_cover">
                                                                                                <div class="pageData">

</div>
                    </div>
            </div>
        </div><!-- no whitespace
         --><div id="readerMiddleRight">
            <div class="toolbar">
                <div class="vscroll" style="position: absolute; left: 5%; height: 100%;">
                    <div class="vscroll-up">&#9650;</div>
                    <div class="vscroll-inner">
                        <div class="vscroll-handle"></div>
                    </div>
                    <div class="vscroll-down">&#9660;</div>
                </div>
                <div style="position: absolute; height: 8%; top:0%; left:35%;" class="single buttons-on-sides">
                                    </div>
                <div style="position: absolute; height: 8%; top:0%; left:48%;" class="dual buttons-on-sides">
                                    </div>
                <div style="position: absolute; height:8%; top:45%; left:35%;" class="single buttons-on-sides">
                                            <a id="SNEXT2" rel="external" class="leftButton" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                            <a id="SNEXT2R" rel="external" class="rightButton" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                    </div>
                <div style="position: absolute; height:8%; top:45%; left:48%;" class="dual buttons-on-sides">
                                            <a id="DNEXT2" rel="external" href="1.html"; onclick="goto('1.html'); return false;"><img class="button" src="/images/next.png"/></a>
                                    </div>
            </div>
        </div>
    </div>
    <div id="readerBottom">
        <div id="readerBottomLeft">
        </div><!-- no whitespace
         --><div id="readerBottomCenter">
            <div class="toolbar">
                <div class="hscroll" style="position: absolute; top: 5%; width: 100%;">
                    <div class="hscroll-left">&#9664;</div>
                    <div class="hscroll-inner">
                        <div class="hscroll-handle"></div>
                    </div>
                    <div class="hscroll-right">&#9654;</div>
                </div>
                <div style="position: absolute; top: 50%; width: 100%;">
                    <audio class="audiobook" id="player" style="width:100%;" controls="controls"></audio>
                </div>
            </div>
        </div><!-- no whitespace
         --><div id="readerBottomRight">
        </div>
    </div>
</div>
</body>
</html>